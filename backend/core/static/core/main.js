(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){e.exports={container:"Button_container__1z1ji",content:"Button_content__11j4g",container_success:"Button_container_success__xtO2D",container_disabled:"Button_container_disabled__1cVSS"}},104:function(e,t,n){e.exports={"input-hidden":"ImageLoader_input-hidden__2K6HC",container:"ImageLoader_container__3w8bW","image-container":"ImageLoader_image-container__Zw6ub",image:"ImageLoader_image__gAZs1",label:"ImageLoader_label__34aDX"}},106:function(e,t,n){e.exports={container:"ColorPicker_container__1F872","color-sample":"ColorPicker_color-sample__3KSB7"}},107:function(e,t,n){e.exports={container:"SelectedColors_container__DN9el","color-sample":"SelectedColors_color-sample__1VdVg"}},108:function(e,t,n){e.exports={body:"Layout_body__29uWW","selected-colors":"Layout_selected-colors__UfQyo","upload-button":"Layout_upload-button__1o_10"}},112:function(e,t,n){e.exports=n(291)},117:function(e,t,n){},291:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(95),c=n.n(r),l=(n(117),n(14)),i=n(96),s=n(12),u=n(98),d=n(38),m=n(15),p=n(99),_=n.n(p).a.get("csrftoken"),f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return fetch(e,{method:"POST",headers:Object(m.a)({},n,{"X-CSRFToken":_}),body:t})},g=function(e){return function(t){t({type:"UPLOAD_IMAGE"}),f("/process/",e).then(function(e){return e.json()}).then(function(e){var n;t((n=e.stencil_id,function(e){e({type:"SET_USER_ID",payload:n})})),t(function(e){return function(t){t({type:"SET_TASK_ID",payload:e})}}(e.task_id)),t({type:"UPLOAD_IMAGE_SUCCESS"}),setInterval(function(){return t(function(e,t){var n=t().app.userId,a=t().app.taskId;f("/result/".concat(n,"/"),JSON.stringify({task_id:a})).then(function(e){return e.text()}).then(function(e){console.log(e),"1"===e&&(window.location="http://localhost:8000/result/".concat(n))})})},3e3)}).catch(function(e){t({type:"UPLOAD_IMAGE_ERROR",payload:e})})}},v={currentColor:{r:241,g:201,b:255,a:1},selectedColors:[]},b={userId:null,image:null,taskId:null},C=Object(l.combineReducers)({colors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"CHANGE_CURRENT_COLOR":return Object(m.a)({},e,{currentColor:a});case"ADD_COLOR":var o=e.selectedColors.map(function(e){return JSON.stringify(e)}),r=Object(d.a)(e.selectedColors);return o.includes(JSON.stringify(a))||r.push(a),{currentColor:e.currentColor,selectedColors:r};default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_USER_ID":return Object(m.a)({},e,{userId:a});case"SET_TASK_ID":return Object(m.a)({},e,{taskId:a});case"SET_IMAGE":return Object(m.a)({},e,{image:a});default:return e}}}),E=n(36);function h(e,t){return function(e,t){var n=Object.keys(t).map(function(n){var a=t[n];return!1===a||void 0===a?"":!0===a?"".concat(e,"_").concat(n):"".concat(e,"_").concat(n,"_").concat(a)}).filter(function(e){return e.length});return[e].concat(Object(d.a)(n))}(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).map(function(t){return e[t]}).join(" ")}var y=function(e){return function(t,n){return h(e,t,n)}},O=n(58),N=n.n(O),I=y(N.a),S=function(e){var t=e.title;return o.a.createElement("div",{className:N.a.container},o.a.createElement("div",{className:I("title")},t))},j=n(100),k=y(n.n(j).a),w=function(e){var t=e.content,n=e.onClick,a=void 0===n?E.noop:n,r=e.containerClassName,c=void 0===r?"":r,l=e.contentClassName,i=void 0===l?"":l,s=e.disabled,u=e.success;return o.a.createElement("div",{className:"".concat(k("container",{disabled:s,success:u})," ").concat(c),onClick:a},o.a.createElement("div",{className:"".concat(k("content")," ").concat(i)},t))},A=n(101),L=n(102),D=n(109),R=n(103),U=n(110),T=n(104),x=y(n.n(T).a),W=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(D.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(o)))).state={imageUrl:null},n.handleChange=function(e){n.setState({imageUrl:URL.createObjectURL(e.target.files[0])}),n.props.setImage(e.target.files[0])},n.handleUpload=function(){var e=new FormData;e.append("image",n.state.image),n.props.uploadImage(e).then(function(){n.props.uploadColors()})},n}return Object(U.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("input",{type:"file",accept:"image/*",id:"imageLoader",onChange:this.handleChange,className:x("input-hidden")}),o.a.createElement("div",{className:x("container")},o.a.createElement("label",{htmlFor:"imageLoader",className:x("label")},"Choose image"),this.state.imageUrl&&o.a.createElement("div",{className:x("image-container")},o.a.createElement("img",{src:this.state.imageUrl,alt:"failed to load",className:x("image")}))))}}]),t}(a.Component),B=Object(s.b)(null,function(e){return{setImage:function(t){e(function(e){return function(t){t({type:"SET_IMAGE",payload:e})}}(t))}}})(W),G=n(105),P=n(106),J=y(n.n(P).a),M=Object(s.b)(function(e){var t=e.colors;return{currentColor:t.currentColor,colors:t}},function(e){return{changeCurrentColor:function(t){var n=t.r,a=t.g,o=t.b,r=t.a;e(function(e,t,n,a){return function(o){o({type:"CHANGE_CURRENT_COLOR",payload:{r:e,g:t,b:n,a:a}})}}(n,a,o,r))},addColor:function(t){var n=t.r,a=t.g,o=t.b,r=t.a;e(function(e,t,n,a){return function(o){o({type:"ADD_COLOR",payload:{r:e,g:t,b:n,a:a}})}}(n,a,o,r))}}})(function(e){var t=e.currentColor,n=e.changeCurrentColor,a=e.addColor,r=(e.colors,"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,",\n    ").concat(t.a,")"));return o.a.createElement("div",{className:J("container")},o.a.createElement("div",null,o.a.createElement(G.ChromePicker,{color:t,onChange:function(e){n(e.rgb)}})),o.a.createElement("div",{className:J("color-sample"),style:{backgroundColor:r}}),o.a.createElement("div",null,o.a.createElement(w,{content:"Add color",onClick:function(){a(t)}})))}),F=n(107),H=y(n.n(F).a),K=Object(s.b)(function(e){return{selectedColors:e.colors.selectedColors}})(function(e){var t=e.selectedColors;return o.a.createElement("div",{className:H("container")},t.map(function(e,t){var n="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,",\n        ").concat(e.a,")");return o.a.createElement("div",{className:H("color-sample"),style:{backgroundColor:n},key:t})}))}),V=n(108),X=y(n.n(V).a),Z=Object(s.b)(function(e){var t=e.colors,n=e.app;return{colors:t.selectedColors,image:n.image}},function(e){return{uploadImageAndColors:function(t){return e(g(t))}}})(function(e){var t=e.colors,n=e.image,a=e.uploadImageAndColors,r=!(t.length>1&&n);return o.a.createElement("div",null,o.a.createElement(S,{title:"Awesome Stencil"}),o.a.createElement("div",{className:X("body")},o.a.createElement("div",{className:X("image-loader")},o.a.createElement(B,null)),o.a.createElement("div",{className:X("selected-colors")},o.a.createElement(K,null)),o.a.createElement("div",{className:X("color-picker")},o.a.createElement(M,null)),o.a.createElement("div",{className:X("upload-button")},o.a.createElement(w,{content:"upload",onClick:r?E.noop:function(){var e=new FormData;e.append("image",n),e.append("colors",JSON.stringify(t)),a(e)},disabled:r,success:!r}))))}),z=Object(l.createStore)(C,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(i.a))),Q=function(){return o.a.createElement(s.a,{store:z},o.a.createElement(Z,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=n(292);c.a.render(o.a.createElement($.a,null,o.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},58:function(e,t,n){e.exports={container:"Header_container__dWu3U",title:"Header_title__3W2Km"}}},[[112,2,1]]]);